<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø¯Ø§Ø© Ø¬Ø±Ø¯ Ø§Ù„Ù…Ø­Ù„ 2025</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; text-align: center; margin: 0; padding: 10px; }
        .box { max-width: 500px; margin: auto; background: #222; padding: 15px; border-radius: 15px; border: 2px solid #333; }
        video { width: 100%; border-radius: 10px; background: #000; }
        #canvas { display: none; }
        .btn { background: #28a745; color: white; border: none; padding: 15px; border-radius: 10px; width: 100%; font-size: 18px; cursor: pointer; margin-top: 10px; }
        .counter { font-size: 40px; color: #ffeb3b; margin: 10px 0; }
        #log { text-align: right; background: #000; padding: 10px; height: 100px; overflow-y: auto; font-size: 12px; margin-top: 10px; border-radius: 5px; }
    </style>
</head>
<body>

    <div class="box">
        <h3>ğŸ“¦ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø³Ø±ÙŠØ¹ (1000 ØµÙ†Ù)</h3>
        <video id="video" autoplay playsinline></video>
        <canvas id="canvas"></canvas>
        
        <div class="counter">Ø§Ù„Ø¹Ø¯Ø¯: <span id="count">0</span></div>
        
        <button class="btn" onclick="captureItem()">Ø±ØµØ¯ ØµÙ†Ù Ø¬Ø¯ÙŠØ¯ (+1)</button>
        <button class="btn" style="background:#dc3545;" onclick="resetCount()">ØªØµÙÙŠØ± Ø§Ù„Ø¬Ø±Ø¯</button>

        <div id="log">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:</div>
    </div>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const countSpan = document.getElementById('count');
        const log = document.getElementById('log');
        let count = 0;

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ (Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ Ù†Ø¬Ø­Øª Ù…Ø¹Ùƒ)
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "environment" } 
                });
                video.srcObject = stream;
            } catch (err) {
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: " + err.message);
            }
        }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¬Ø±Ø¯ (Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø¯)
        function captureItem() {
            count++;
            countSpan.innerText = count;

            //  Ø§Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
            const time = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.innerText = `âœ”ï¸ ØªÙ… Ø¬Ø±Ø¯ ØµÙ†Ù Ø±Ù‚Ù… (${count}) Ø§Ù„Ø³Ø§Ø¹Ø© ${time}`;
            log.prepend(entry);

            // Ø¥ØµØ¯Ø§Ø± ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ Ø®ÙÙŠÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            if (window.navigator.vibrate) window.navigator.vibrate(50); 
        }

        function resetCount() {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø¯ØŸ")) {
                count = 0;
                countSpan.innerText = count;
                log.innerText = "Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:";
            }
        }

        startCamera();
    </script>
</body>
</html>
