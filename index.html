<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¬Ø±Ø¯ Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ø°ÙƒÙŠ - Ù†Ø³Ø®Ø© 2025</title>
    
    <!-- Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…ÙƒØªØ¨Ø© ml5.js ÙˆÙ‡ÙŠ Ø§Ù„Ø£Ø³Ù‡Ù„ ÙˆØ§Ù„Ø£Ø¶Ù…Ù† Ù„Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡ Ù…Ø³Ø§Ø±Ø§Øª -->
    <script src="cdnjs.cloudflare.com"></script>
    <script src="unpkg.com"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a1a; color: white; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        #canvas-container { border: 4px solid #333; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative; }
        #status { margin-top: 20px; padding: 10px 20px; border-radius: 50px; background: #333; font-size: 14px; color: #ffeb3b; }
        .info-panel { margin-top: 15px; text-align: center; max-width: 400px; line-height: 1.6; color: #bbb; }
        .detected-list { margin-top: 10px; color: #4caf50; font-weight: bold; font-size: 18px; }
    </style>
</head>
<body>

    <h2>ğŸ›’ Ø¬Ø±Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ÙŠØ©</h2>
    
    <div id="canvas-container">
        <!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ø±Ø³Ù… Ù‡Ù†Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø³ÙƒØ±Ø¨Øª -->
    </div>

    <div id="status">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø® Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...</div>
    
    <div class="info-panel">
        ÙˆØ¬Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø§Ù„Ù…Ù†ØªØ¬. Ø³ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙ†Ù ÙˆØªØ­Ø¯ÙŠØ¯Ù‡ Ø¢Ù„ÙŠØ§Ù‹.
        <div id="item-name" class="detected-list">Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±ØµØ¯...</div>
    </div>

    <script>
        let video;
        let detector;
        let detections = [];

        function setup() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø³Ù… ÙˆÙˆØ¶Ø¹Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
            const canvas = createCanvas(320, 240);
            canvas.parent('canvas-container');

            // ÙØªØ­ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø§Ù„Ø®Ù„ÙÙŠØ©
            video = createCapture({
                video: { facingMode: "environment" },
                audio: false
            });
            video.size(320, 240);
            video.hide(); // Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø³Ù… ÙÙ‚Ø·

            // ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ COCO-SSD Ù„Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡
            // Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…Ø¯Ù…Ø¬ ÙˆÙ„Ù† ÙŠØ¹Ø·ÙŠÙƒ Ø£Ø®Ø·Ø§Ø¡ 404
            detector = ml5.objectDetector('cocossd', modelReady);
        }

        function modelReady() {
            document.getElementById('status').innerText = "âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²! Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø¢Ù†";
            document.getElementById('status').style.color = "#4caf50";
            // Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±ØµØ¯
            detector.detect(video, gotDetections);
        }

        function gotDetections(error, results) {
            if (error) {
                console.error(error);
                return;
            }
            detections = results;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…ÙƒØªØ´Ù ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
            if (detections.length > 0) {
                document.getElementById('item-name').innerText = "ØªÙ… Ø±ØµØ¯: " + detections[0].label;
            }

            // Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ø±ØµØ¯ Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ù…
            detector.detect(video, gotDetections);
        }

        function draw() {
            // Ø±Ø³Ù… Ù…Ø§ ØªØ±Ø§Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆØ­Ø©
            image(video, 0, 0, width, height);

            // Ø±Ø³Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª ÙˆØ§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙˆÙ‚ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ©
            for (let i = 0; i < detections.length; i++) {
                let object = detections[i];
                
                stroke(0, 255, 0);
                strokeWeight(4);
                noFill();
                rect(object.x, object.y, object.width, object.height);
                
                noStroke();
                fill(0, 255, 0);
                textSize(16);
                text(object.label, object.x, object.y - 10);
            }
        }
    </script>
</body>
</html>
